<script type="module">
    import { database } from "./database/func.mjs";
    import { auth } from "./database/db.mjs"; 
    import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

    onAuthStateChanged(auth, async (user) => {
        if (user) {
            const userID = user.uid;
            console.log("Utilizador autenticado:", userID);

            //pegar o id atraves dos parametros no URL
            const params = new URLSearchParams(window.location.search);
            const id = params.get("idTarefa");
            console.log("ID da tarefa:", id);

            try{
                await database.removeData(`/tarefas/${userID}/${id}`);
                window.location.href = "tarefas.html";
            } catch(error){
                console.error(error);
            }
        }
    });
</script>