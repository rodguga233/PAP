<script type="module">
    import { database } from "./database/func.mjs";
    import { auth } from "./database/db.mjs"; 

    // Firebase 8 → auth.onAuthStateChanged
    auth.onAuthStateChanged(async (user) => {
        if (user) {
            const userID = user.uid;
            console.log("Utilizador autenticado:", userID);

            // pegar o id através dos parâmetros no URL
            const params = new URLSearchParams(window.location.search);
            const id = params.get("idTarefa");
            console.log("ID da tarefa:", id);

            try {
                await database.removeData(`/tarefas/${userID}/${id}`);
                window.location.href = "tarefas.html";
            } catch (error) {
                console.error("Erro ao apagar tarefa:", error);
            }

        } else {
            alert("Nenhum utilizador autenticado. Faça login novamente.");
            window.location.href = "index.html";
        }
    });
</script>
